# 4 카프카의 내부 동작 원리와 구현

## 4.1 카프카 리플리케이션

### 4.1.1 리플리케이션 동작 개요

프로듀서에서 토픽으로 메시지를 보내면 카프카 클러스터를 이루고 있는 다른 브로커들도 동일한 메시지를 가지고 있는다.

중요한 점은 토픽이 복사되는 것이 아니라 토픽을 구성하는 각각의 파티션들이 리플리케이션 된다.

### 4.1.2 리더와 팔로워

### 4.1.3 복제 유지와 커밋

### 4.1.4 리더와 팔로워의 단계별 리플리케이션 동작

### 4.1.5 리더에포크와 복구

## 4.2 컨트롤러

## 4.3 로그(로그 세그먼트)

### 4.3.1 로그 세그먼트 삭제

### 4.3.2 로그 세그먼트 컴팩션

## 4.4 정리
