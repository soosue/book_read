# 6. 컨슈머의 내부 동작 원리와 구현

- 컨슈머 역할

![image](https://user-images.githubusercontent.com/54942017/182159047-a6174f26-3931-4520-b740-39c642020d24.png)

## 6.1 컨슈머 오프셋 관리

? 컨슈머가 재시작하거나 문제가 발생해 교체되었을 때 마지막으로 읽은 메시지 이후부터 읽기 위해 "위치를 기록" 하는데 "오프셋"이라 한다. => 다음으로 읽을 위치를 기록

=> 토픽에 저장한다. `__consumer_offsets`, "컨슈머 그룹"별로 오프셋 정보가 기록됨.
=> 컨슈머 그룹, 토픽, 파티션에 대한 정보 등이 기록됨.

![image](https://user-images.githubusercontent.com/54942017/182162397-41f01c3d-d000-429b-b6a2-ed2d6f2cd93c.png)

브로커 설정파일 server.properties

- offsets.topic.num.partitions: 50
- offsets.topic.replication.factor: 3
